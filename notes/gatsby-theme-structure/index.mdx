
# File structure in official Gatsby themes

## Goals

- Make the shadowing API for each theme flexible and simple to customize
- Make shadowing APIs across multiple themes "guessable"

## Problems

- There's more than one way to skin a cat
- Once a directory structure in a theme is published, it's effectively part of the public API and changing this would constitute a breaking change
- Sharing persistent layout elements (e.g. headers, footers, and sidebars) can be handled in several different ways
- Making themes truly composable and interoperable with these things in mind requires some clear patterns and conventions

## Templates

The "template" pattern is used in the Digital Garden themes.
The idea with this approach is to separate the GraphQL query into its own module so that the theme's visual styles and page layout can be shadowed without touching the GraphQL or data layer.

- Templates are located in a `src/templates` directory.
- Templates handle GraphQL queries but do not include components for styles or layout.
- The `gatsby-node.js` config uses templates to create pages.
- Templates import separate *layout* components (that can be shadowed) and pass the results of the GraphQL query as props

### Layouts/Pages

The "layout" components (for lack of a better word) are imported and used by the templates.
Each different type of page generated by a theme should have its own layout component.

### Example

```
// example notes theme
src/
  templates/
    notes.js    // index/list page
    note.js     // note detail page
  components/
    notes.js    // index/list layout
    note.js     // index/list layout
```

## Proposals for organizing guidelines

### Option A

```
src/
  templates/
    posts.js
    post.js
  components/
    posts.js
    post.js
    // other non-page-level components
    header.js
    footer.js
  gatsby-theme-ui/
    index.js
    // can include other modules (color.js, typography.js, etc.)
    // that are exported by the index.js module
```
